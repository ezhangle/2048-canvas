function Particle(b,c,a){this.init(b,c,a)}Particle.prototype={init:function(b,c,a){this.alive=true;this.radius=a||10;this.wander=0.15;this.theta=random(TWO_PI);this.drag=0.92;this.color="#fff";this.x=b||0;this.y=c||0;this.vx=0;this.vy=0},move:function(){this.x+=this.vx;this.y+=this.vy;this.vx*=this.drag;this.vy*=this.drag;this.theta+=random(-0.5,0.5)*this.wander;this.vx+=sin(this.theta)*0.1;this.vy+=cos(this.theta)*0.1;this.radius*=0.96;this.alive=this.radius>0.5},draw:function(a){a.beginPath();a.arc(this.x,this.y,this.radius,0,TWO_PI);a.fillStyle=this.color;a.fill()}};var MAX_PARTICLES=280;var COLOURS=["#69D2E7","#A7DBD8","#E0E4CC","#F38630","#FA6900","#FF4E50","#F9D423"];var particles=[];var pool=[];var demo=Sketch.create({container:document.getElementById("container"),retina:"auto"});demo.setup=function(){var b,a,c;for(b=0;b<20;b++){a=(demo.width*0.5)+random(-100,100);c=(demo.height*0.5)+random(-100,100);demo.spawn(a,c)}};demo.spawn=function(a,e){var d,b,c;if(particles.length>=MAX_PARTICLES){pool.push(particles.shift())}d=pool.length?pool.pop():new Particle();d.init(a,e,random(5,40));d.wander=random(0.5,2);d.color=random(COLOURS);d.drag=random(0.9,0.99);b=random(TWO_PI);c=random(2,8);d.vx=sin(b)*c;d.vy=cos(b)*c;particles.push(d)};demo.update=function(){var a,b;for(a=particles.length-1;a>=0;a--){b=particles[a];if(b.alive){b.move()}else{pool.push(particles.splice(a,1)[0])}}};demo.draw=function(){demo.globalCompositeOperation="lighter";for(var a=particles.length-1;a>=0;a--){particles[a].draw(demo)}};demo.mousemove=function(){var h,d,e,g,a,c,b,f;for(c=0,f=demo.touches.length;c<f;c++){g=demo.touches[c],a=random(1,4);for(b=0;b<a;b++){demo.spawn(g.x,g.y)}}};